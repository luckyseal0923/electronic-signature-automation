function enableDraw(c, fieldId) {
  const ctx = c.getContext("2d");
  let drawing = false;

  // ⚠️ 關鍵修正：等 DOM 掛載完成後再設定 canvas 尺寸
  requestAnimationFrame(() => {
    const rect = c.getBoundingClientRect();
    c.width = rect.width;
    c.height = rect.height;

    ctx.lineWidth = 2;
    ctx.lineCap = "round";
    ctx.strokeStyle = "#000";
  });

  c.addEventListener("mousedown", e => {
    drawing = true;
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
  });

  c.addEventListener("mousemove", e => {
    if (!drawing) return;
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
  });

  window.addEventListener("mouseup", () => {
    if (drawing) {
      drawing = false;
      results[fieldId] = c.toDataURL("image/png");
    }
  });

  // 手機支援（非常重要）
  c.addEventListener("touchstart", e => {
    e.preventDefault();
    const t = e.touches[0];
    const rect = c.getBoundingClientRect();
    drawing = true;
    ctx.beginPath();
    ctx.moveTo(t.clientX - rect.left, t.clientY - rect.top);
  });

  c.addEventListener("touchmove", e => {
    e.preventDefault();
    if (!drawing) return;
    const t = e.touches[0];
    const rect = c.getBoundingClientRect();
    ctx.lineTo(t.clientX - rect.left, t.clientY - rect.top);
    ctx.stroke();
  });

  c.addEventListener("touchend", () => {
    if (drawing) {
      drawing = false;
      results[fieldId] = c.toDataURL("image/png");
    }
  });
}
